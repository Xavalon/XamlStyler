#
# Release
# This pipeline builds and validate the extension in all supported configurations.
#

trigger:
- master

pr:
- master

variables:
  buildConfiguration: 'Release'
  major: 3
  minor: $[counter(format('{0:yyMM}', pipeline.startTime), 100)]
  patch: $[counter(variables['patch'], 0)]
  version: $(major).$(minor).$(patch).0

name: $[variables.version]

jobs:
- template: ./templates/run-tests-public.yaml
- template: ./templates/build-extension-public.yaml
- template: ./templates/build-console-public.yaml